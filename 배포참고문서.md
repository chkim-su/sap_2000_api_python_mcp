# Smithery를 통한 MCP 서버 개발 및 배포 가이드Smithery는 Model Context Protocol (MCP) 서버의 중앙 레지스트리이자 관리 플랫폼으로, 2025년 현재 5,930개 이상의 MCP 서버를 보유한 세계 최대의 MCP 마켓플레이스입니다. 사용자가 `claude mcp add` 명령어로 바로 설치해서 사용할 수 있는 원격 호스팅 MCP 서버를 구축하는 것이 목표라면, Smithery의 호스티드 배포 모델을 활용하는 것이 최적의 선택입니다.[1][2][3]## Smithery의 배포 모델 이해Smithery는 두 가지 배포 방식을 제공합니다: 로컬 설치와 원격 호스팅입니다. 사용자의 목표인 "임의의 사용자가 명령어 하나로 바로 사용할 수 있게 만드는 것"은 **원격 호스팅 모델**에 해당합니다.[3][4]원격 호스팅 모드에서는 MCP 서버가 Smithery의 인프라에서 실행되며, 사용자는 웹을 통해 즉시 접근할 수 있습니다. 이 방식의 핵심 장점은 서버 관리나 의존성 설치 없이 바로 사용할 수 있다는 점입니다.[3][5]

## 개발 환경 설정### TypeScript 기반 개발Smithery는 TypeScript와 JavaScript를 모두 지원하지만, TypeScript가 더 강력한 타입 안전성을 제공합니다. 먼저 개발 환경을 설정해보겠습니다:[2][6]

```bash
# 프로젝트 디렉토리 생성
mkdir my-mcp-server
cd my-mcp-server

# npm 프로젝트 초기화
npm init -y

# 필수 의존성 설치
npm install @modelcontextprotocol/sdk zod
npm install -D @smithery/cli typescript @types/node

# TypeScript 설정
npx tsc --init
```

### Python 기반 개발 (FastMCP)Python 개발자라면 FastMCP와 Smithery Python SDK를 사용할 수 있습니다:[7][8]

```bash
# Python 가상환경 생성
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 필수 패키지 설치
pip install smithery fastmcp pydantic
```

## MCP 서버 구현### TypeScript 서버 예제기본적인 MCP 서버를 구현해보겠습니다. `src/index.ts` 파일을 생성합니다:[9][6]

```typescript
#!/usr/bin/env node
import { McpServer } from "@modelcontextprotocol/sdk/server/mcp.js";
import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
import { z } from "zod";

// MCP 서버 인스턴스 생성
const server = new McpServer({
  name: "my-calculator-mcp",
  version: "1.0.0",
});

// 계산기 도구 등록
server.tool(
  'calculate',
  '기본적인 수학 계산을 수행합니다',
  {
    expression: z.string().describe("계산할 수식 (예: 2 + 3 * 4)")
  },
  async ({ expression }) => {
    try {
      const result = Function('"use strict"; return (' + expression + ')')();
      return {
        content: [
          {
            type: "text",
            text: `계산 결과: ${expression} = ${result}`
          }
        ]
      };
    } catch (error) {
      return {
        content: [
          {
            type: "text",
            text: `오류: 유효하지 않은 수식입니다.`
          }
        ],
        isError: true
      };
    }
  }
);

// 서버 시작
async function main() {
  const transport = new StdioServerTransport();
  await server.connect(transport);
  console.error("Calculator MCP Server가 시작되었습니다.");
}

main().catch(error => {
  console.error("서버 시작 오류:", error);
  process.exit(1);
});
```

### Python 서버 예제 (FastMCP)Python으로는 더 간단하게 구현할 수 있습니다:[10][7]

```python
from smithery import from_fastmcp
from fastmcp import FastMCP
from pydantic import BaseModel

class ConfigSchema(BaseModel):
    api_key: str
    debug: bool = False

# Smithery와 통합된 FastMCP 서버 생성
mcp = FastMCP("Weather MCP Server")
server = from_fastmcp(mcp, config_schema=ConfigSchema)

@server.tool()
def get_weather(city: str) -> str:
    """도시의 날씨 정보를 조회합니다."""
    # 실제 구현에서는 날씨 API를 호출
    return f"{city}의 현재 날씨: 맑음, 기온 22°C"

@server.tool()
def calculate_temperature(celsius: float) -> dict:
    """섭씨 온도를 화씨로 변환합니다."""
    fahrenheit = (celsius * 9/5) + 32
    return {
        "celsius": celsius,
        "fahrenheit": fahrenheit,
        "message": f"{celsius}°C는 {fahrenheit}°F입니다."
    }

if __name__ == "__main__":
    server.run(transport="streamable-http")
```

## Smithery 설정 파일원격 호스팅을 위해서는 `smithery.yaml` 파일이 필요합니다. 이 파일은 Smithery가 서버를 어떻게 실행하고 설정할지를 정의합니다:[11][12]

```yaml
# Smithery.ai 설정 파일
startCommand:
  type: stdio
  configSchema:
    # MCP 서버의 설정 옵션을 정의하는 JSON Schema
    type: object
    properties:
      apiKey:
        type: string
        title: "API 키"
        description: "외부 서비스 API 키"
      temperature:
        type: number
        default: 0.7
        minimum: 0
        maximum: 1
        title: "온도 설정"
        description: "응답의 창의성을 조절하는 매개변수"
      enableLogging:
        type: boolean
        default: false
        title: "로깅 활성화"
        description: "디버깅을 위한 로깅 활성화"
    required: ["apiKey"]
  
  commandFunction: |-
    (config) => ({ 
      command: 'node', 
      args: ['./build/index.js'], 
      env: { 
        API_KEY: config.apiKey,
        TEMPERATURE: config.temperature?.toString(),
        ENABLE_LOGGING: config.enableLogging?.toString()
      } 
    })
  
  exampleConfig:
    apiKey: "sk-example123"
    temperature: 0.8
    enableLogging: true
```

## 로컬 개발 및 테스트### Smithery CLI를 이용한 개발Smithery CLI는 개발 과정을 크게 단순화해줍니다:[13][14]

```bash
# 개발 서버 시작 (핫 리로드 지원)
npx @smithery/cli dev

# 플레이그라운드와 함께 시작 (권장)
npx @smithery/cli playground
```

`smithery playground` 명령어는 서버를 시작하고 자동으로 브라우저에서 플레이그라운드를 열어줍니다. 이를 통해 다음과 같은 기능을 활용할 수 있습니다:[10][8]
- MCP 서버와 실시간 상호작용
- 도구들을 다양한 입력으로 테스트
- 완전한 요청/응답 플로우 확인
- 빠른 디버깅과 반복 개발

### 패키지 설정`package.json`에 필요한 스크립트들을 추가합니다:[6][8]

```json
{
  "name": "my-mcp-server",
  "version": "1.0.0",
  "description": "Smithery용 MCP 서버",
  "main": "build/index.js",
  "type": "module",
  "scripts": {
    "build": "tsc && chmod +x build/index.js",
    "dev": "smithery dev",
    "playground": "smithery playground",
    "start": "node build/index.js"
  },
  "dependencies": {
    "@modelcontextprotocol/sdk": "^1.0.0",
    "zod": "^3.22.0"
  },
  "devDependencies": {
    "@smithery/cli": "^1.0.0",
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  },
  "keywords": ["mcp", "smithery", "ai", "tools"],
  "author": "Your Name",
  "license": "MIT"
}
```

## Smithery 배포 프로세스### GitHub 저장소 준비1. **GitHub 저장소 생성**: 코드를 GitHub에 푸시합니다[15][12]
2. **필수 파일 확인**: `smithery.yaml`과 `Dockerfile`(필요한 경우)이 포함되어 있는지 확인합니다
3. **저장소 공개**: 저장소가 공개되어 있어야 합니다[12]

### Smithery에서 배포1. **Smithery 로그인**: https://smithery.ai 에 접속하여 GitHub 계정으로 로그인합니다[15]
2. **Deploy Server 클릭**: 우측 상단의 "Deploy Server" 버튼을 클릭합니다[15]
3. **GitHub 계정 연결**: GitHub 계정을 선택하고 필요시 Smithery AI를 설치합니다[15]
4. **저장소 선택**: MCP 서버가 포함된 저장소를 선택합니다[15]
5. **배포 설정**: Base Directory와 기타 설정을 확인하고 "Create"를 클릭합니다[15]

Smithery는 자동으로 `Dockerfile`과 `smithery.yaml` 파일이 없는 경우 생성해줍니다. 배포가 완료되면 서버가 Smithery의 인프라에서 실행되며, 고유한 URL을 통해 접근할 수 있게 됩니다.[15]

## 원격 호스팅의 핵심 특징### 즉시 사용 가능원격 호스팅된 MCP 서버는 사용자가 별도의 설치나 설정 없이 즉시 사용할 수 있습니다. Claude Desktop이나 다른 MCP 클라이언트에서 간단한 명령어로 연결할 수 있습니다:[4]

```bash
# Smithery CLI를 통한 설치
npx @smithery/cli install your-server-name --client claude
```

### 자동 확장과 관리Smithery가 서버의 확장, 로드 밸런싱, 장애 복구를 자동으로 처리합니다. 이는 개발자가 인프라 관리에 신경 쓸 필요 없이 서버 로직에만 집중할 수 있게 해줍니다.[5][16]

### 설정 관리원격 호스팅에서는 사용자의 API 키와 설정이 Smithery의 백엔드로 전달됩니다. Smithery는 이러한 설정 데이터를 "ephemeral(일시적)"하게만 처리하며 장기간 저장하지 않는다고 명시하고 있습니다.[3][4]

## 보안 고려사항MCP 서버 개발 시 보안은 중요한 고려사항입니다. 특히 원격 호스팅에서는 다음 사항들을 주의해야 합니다:[17][18]

- **입력 검증**: 모든 사용자 입력을 엄격하게 검증합니다
- **권한 제한**: 서버가 수행할 수 있는 작업을 최소한으로 제한합니다
- **API 키 관리**: 민감한 정보는 환경 변수를 통해 안전하게 관리합니다
- **에러 처리**: 상세한 에러 정보가 외부로 노출되지 않도록 합니다

## 클라이언트 통합### Claude Desktop 통합배포가 완료되면 사용자들은 다음과 같은 방법으로 서버를 사용할 수 있습니다:[19]

```bash
# Smithery CLI를 통한 자동 설치
npx @smithery/cli install your-server-name --client claude
```

### 다른 클라이언트 지원Smithery는 클라이언트 무관(client-agnostic) 설계를 채택하여 Claude Desktop뿐만 아니라 Cursor, VS Code, LM Studio 등 다양한 MCP 클라이언트에서 사용할 수 있습니다.[3][20]

## 모니터링 및 유지보수### 사용량 통계Smithery는 호스팅된 MCP 서버의 사용량 통계를 제공합니다. 이를 통해 서버의 인기도와 사용 패턴을 파악할 수 있습니다.[4]

### 버전 관리GitHub 저장소의 업데이트는 자동으로 Smithery에 반영되며, 사용자들은 항상 최신 버전을 사용하게 됩니다.[15]

## 성공적인 배포를 위한 모범 사례1. **명확한 문서화**: 서버의 기능과 사용법을 명확하게 문서화합니다
2. **적절한 도구 설명**: 각 도구의 목적과 매개변수를 상세히 기술합니다
3. **에러 처리**: 예외 상황에 대한 적절한 에러 메시지를 제공합니다
4. **성능 최적화**: 응답 시간을 최소화하고 리소스 사용을 효율화합니다
5. **보안 강화**: 입력 검증과 권한 제한을 철저히 구현합니다

Smithery를 통한 원격 호스팅 MCP 서버 개발은 개발자에게는 간편한 배포 프로세스를, 사용자에게는 즉시 사용 가능한 도구를 제공하는 win-win 솔루션입니다. 적절한 계획과 구현을 통해 수천 명의 사용자가 활용할 수 있는 강력한 AI 도구를 만들 수 있습니다.
